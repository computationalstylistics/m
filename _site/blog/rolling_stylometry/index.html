<!DOCTYPE html>
<html lang="">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Maciej Eder / Testing rolling stylometry</title>
  <meta name="description" content="The following sections briefly introduce a new stylometric method (Eder,2015) that combines supervised machine-learning classification with theidea of sequen...">
  <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon.ico">
  <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
  <link rel="canonical" href="http://localhost:4000/blog/rolling_stylometry/">
  
  
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    
    <span class="site-title">
        
        Maciej <strong>Eder</strong>
    </span>
    

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

      <div class="trigger">
        <!-- About -->
                
        
        

        
        

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

        
        

  
      <!-- projects --> 
  
        
        


  
        <!-- CV link -->
        <!-- <a class="page-link" href="http://localhost:4000/assets/pdf/CV.pdf">vitae</a> -->

      </div>
    </nav>

  </div>

</header>








    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Testing rolling stylometry</h1>
    <p class="post-meta">October 8, 2014 • Maciej Eder</p>
  </header>

  <article class="post-content">
    <p>The following sections briefly introduce a new stylometric method (Eder,
2015) that combines supervised machine-learning classification with the
idea of sequential analysis. Unlike standard procedures, aimed at
assessing style differentiation between discrete text samples, the new
method, supported with compact visualization, tries to look inside a
text represented as a set of linearly sliced chunks, in order to test
their stylistic consistency. Three flavors of the method have been
introduced: (i) Rolling SVM, relying on the support vector machines
classifier, (ii) Rolling NSC, based on the nearest shrunken centroids
method, and (iii) Rolling Delta, using the classic Burrowsian measure of
similarity. The technique is primarily intended to assess mixed
authorship; however, it can be also used as a magnifying glass to
inspect works with unclear stylometric signal. To test its
applicability, three different examples of collaborative work have been
examined: (i) the 13th-century French allegorical poem “Roman de la
Rose”, (ii) a 15th-century translation of the Bible into Polish known
as “Queen Sophia’s Bible”, and (iii) “The Inheritors”, a novel
collaboratively written by Joseph Conrad and Ford Madox Ford in 1901.</p>

<p>Supposing there is a work written collaboratively – i.e. a text in which
some authorial takeovers are suspected to have happened – the procedure
starts with chunking the text into consecutive samples, or equal-size
blocks of <em>N</em> words (tokens). Arguably, any classification method can be
rolled through these blocks, in the present study, however, three
supervised classification techniques known for their high accuracy were
used: SVM, NSC, and Delta. Even if they rely on substantially different
mathematical kernels, SVM, NSC and Delta use exactly the same corpus
setup to carry out the classification. Namely, a number of
representative samples for each class is expected to constitute a
reference set (training set), while the remaining samples, including
anonymous ones, go to a test set. Next, each sample from the test set is
checked against the training set in order to identify the most similar
authorial profile (i.e. the best matched training class). In rolling
stylometry, roughly the same setup is used. The only difference is that
instead of several samples, the test set contains a single work to be
chunked automatically into equal-sized segments.</p>

<p>The final stage of the analysis involves a graphical representation of
stylistic changes throughout a chunked text. A simple home-brew graph
has been used. To keep the plot clean, any redundant information have
been removed. The goal was to emphasize visually the most likely
candidate – i.e. the actual answer of the classifier – and to keep less
probable candidates slightly in the shadow. To this end, horizontal
stripes colored according to the assigned class were used, the primary
stripe bold.</p>

<div class="img_row">
    <img class="col three left" src="/assets/img/rolling-svm_100-features_5000-per-slice.png" alt="" title="Roman de la Rose assessed using Rolling SVM and 100 MFWs" />
</div>
<div class="col three caption">
    Fig. 1: Roman de
    la Rose assessed using Rolling SVM and 100 MFWs; window size: 5,000
    words, sample overlap: 4,500 words. Sections attributed to Guillaume de
    Lorris are marked red, those attributed to Jean de Meun are green. The
    level of certainty of the classification is indicated by the thickness
    of the bottom stripe. The commonly-accepted division into two parts is
    marked with a vertical dashed line.
</div>

<div class="img_row">
    <img class="col three left" src="/assets/img/rolling-nsc_50-features_5000-per-slice_0-cullng.png" alt="" title="Queen Sophia’s Bible assessed using Rolling NSC and 50 MFWs" />
</div>
<div class="col three caption">
    Fig. 2:
    Queen Sophia’s Bible assessed using Rolling NSC and 50 MFWs. Sections
    attributed to 1st, 2nd, 4th and 5th scribe are marked red, green, blue
    and black, respectively.
</div>

<div class="img_row">
    <img class="col three left" src="/assets/img/rolling-delta-CD_1000-features_5000-per-slice_no-sampling.png" alt="" title="The Inheritors by Conrad/Ford assessed using Rolling Delta and
    1,000 MFWs" />
</div>
<div class="col three caption">
    Fig. 3: The Inheritors by Conrad/Ford assessed using Rolling Delta and
    1,000 MFWs. The bottom stripe indicates the first ranked candidate
    (i.e. the most probable), then comes the second and the third suggested
    class. Sections attributed to Ford are marked green, the red ones are
    for Conrad.
</div>

<div class="img_row">
    <img class="col three left" src="/assets/img/rolling-delta-CD_500-features_5000-per-slice_no-sampling.png" alt="" title="The Inheritors by Conrad/Ford assessed using Rolling Delta and 500 MFWs" />
</div>
<div class="col three caption">
    Fig. 4: The Inheritors by Conrad/Ford assessed using Rolling Delta and 500 MFWs.
</div>

<h2 id="further-reading">Further reading</h2>

<p>The above procedure is described in detail in the following paper: Eder, M. (2016). <a href="https://academic.oup.com/dsh/article/31/3/457/1745764">Rolling stylometry</a>. <em>Digital Scholarship in the Humanities</em>, <strong>31</strong>(3): 457-469, [<a href="https://github.com/computationalstylistics/preprints/blob/master/Eder_Rolling_stylometry_draft.pdf">pre-print</a>].</p>

<h2 id="the-code">The code</h2>

<p>The rolling stylometry technique is supported by the R package <code class="highlighter-rouge">stylo</code>
(ver. &gt;=0.5.8), through the function <code class="highlighter-rouge">rolling.classify()</code>. However,
since the function is not supplemented by GUI yet, it might look
non-intuitive. This appendix provides a concise step-by-step howto
explaining its usage. To reproduce the plots as shown above, follow
these steps:</p>

<ol>
  <li>
    <p>Install the package stylo in the version &gt;= 0.5.8. Click <strong>here</strong>
for further details.</p>
  </li>
  <li>
    <p>Create a new folder: it will serve as a working space for your
experiment. Create two subfolders named <code class="highlighter-rouge">test_set</code> and
<code class="highlighter-rouge">reference_set</code> (all file names are case sensitive!). Put your
disputed text into the <code class="highlighter-rouge">test_set</code>, put the remaining texts into the
<code class="highlighter-rouge">reference_set</code>. The setup for the Conrad/Ford case was as follows:</p>
  </li>
</ol>

<!-- end list -->

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>reference_set 
    Conrad_Chance_1913.txt 
    Conrad_Heart_1899.txt 
    Conrad_Lord_1900.txt 
    Conrad_Nigger_1897.txt 
    Conrad_Victory_1915.txt 
    Conrad_Western_1911.txt 
    Ford_Apollo_1908.txt 
    Ford_Benefactor_1905.txt 
    Ford_Girl_1907.txt 
    Ford_Nancy_1911.txt 
    Ford_Seal_1907.txt 
    Ford_Soldier_1915.txt 

test_set 
    Conford_Inheritors_1901.txt 
</code></pre></div></div>

<p>The complete setup for the Roman de la Rose case can be downloaded from
<strong>here</strong>.</p>

<ol>
  <li>Load the library <code class="highlighter-rouge">stylo</code>, set your working directory:</li>
</ol>

<!-- end list -->

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">stylo</span><span class="p">)</span><span class="w"> 
</span><span class="n">setwd</span><span class="p">(</span><span class="s2">"path/to/the/folder/containing/two/subcorpora"</span><span class="p">)</span><span class="w"> 
</span></code></pre></div></div>

<ol>
  <li>Optional but important: read the help page for the function
<code class="highlighter-rouge">rolling.classify()</code>:</li>
</ol>

<!-- end list -->

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">help</span><span class="p">(</span><span class="n">rolling.classify</span><span class="p">)</span><span class="w"> 
</span></code></pre></div></div>

<ol>
  <li>Run the function <code class="highlighter-rouge">rolling.classify()</code>, use as many arguments as
needed:</li>
</ol>

<!-- end list -->

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Fig. 1</span><span class="w">
</span><span class="n">rolling.classify</span><span class="p">(</span><span class="n">write.png.file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">classification.method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"svm"</span><span class="p">,</span><span class="w"> </span><span class="n">mfw</span><span class="o">=</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">training.set.sampling</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"normal.sampling"</span><span class="p">,</span><span class="w"> </span><span class="n">slice.size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5000</span><span class="p">,</span><span class="w"> </span><span class="n">slice.overlap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4500</span><span class="p">)</span><span class="w"> 
</span></code></pre></div></div>

<p>The vertical dashed line that divides the part by Guillaume de Lorris
and Jean de Meun is produced by adding the word “xmilestone” into the
input text, after the line 4,058. One can add as many milestones as
needed; they will be reproduced in the final plot and labelled
automatically using lowercase roman letters.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Fig. 2</span><span class="w">
</span><span class="n">rolling.classify</span><span class="p">(</span><span class="n">write.png.file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">classification.method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"nsc"</span><span class="p">,</span><span class="w"> </span><span class="n">mfw</span><span class="o">=</span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">training.set.sampling</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"normal.sampling"</span><span class="p">,</span><span class="w"> </span><span class="n">slice.size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5000</span><span class="p">,</span><span class="w"> </span><span class="n">slice.overlap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4500</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Fig. 3</span><span class="w">
</span><span class="n">rolling.classify</span><span class="p">(</span><span class="n">write.png.file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">classification.method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"delta"</span><span class="p">,</span><span class="w"> </span><span class="n">mfw</span><span class="o">=</span><span class="m">1000</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Fig. 4</span><span class="w">
</span><span class="n">rolling.classify</span><span class="p">(</span><span class="n">write.png.file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">classification.method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"delta"</span><span class="p">,</span><span class="w"> </span><span class="n">mfw</span><span class="o">=</span><span class="m">500</span><span class="p">)</span><span class="w"> 
</span></code></pre></div></div>

<h2 id="references">References</h2>

<p><strong>Eder, M.</strong> (2016). <a href="https://academic.oup.com/dsh/article/31/3/457/1745764">Rolling stylometry</a>. <em>Digital Scholarship in the Humanities</em>, <strong>31</strong>(3): 457-469, [<a href="https://github.com/computationalstylistics/preprints/blob/master/Eder_Rolling_stylometry_draft.pdf">pre-print</a>].</p>

  </article>

  

</div>

      </div>
    </div>

    <footer>

  <div class="wrapper">
    &copy; Copyright 2019 by Maciej Eder.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.

    
  </div>

</footer>


    <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="http://localhost:4000/assets/js/common.js"></script>


<!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js"></script>
<script src="http://localhost:4000/assets/js/katex.js"></script>




<!-- Include custom icon fonts -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/fontawesome-all.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.min.css">

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-XXXXXXXXX', 'auto');
ga('send', 'pageview');
</script>


  </body>

</html>
